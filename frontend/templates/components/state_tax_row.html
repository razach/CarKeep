<div class="state-card" id="state-{{ state_code }}">
  <div class="state-header">
    <h4>
      <input type="text" name="state_name" value="{{ config.state_name }}" class="input" form="form-{{ state_code }}" />
      ({{ state_code }})
    </h4>
    {% if state_code in ['VA', 'TX', 'CA'] %}
    <span class="default-badge">Default</span>
    {% endif %}
  </div>
  <form id="form-{{ state_code }}" hx-post="{{ url_for('frontend.save_state_tax', state_code=state_code) }}" hx-target="#state-{{ state_code }}" hx-swap="outerHTML">
    <div class="state-details">
      <div class="tax-rate">
        <label><strong>Property Tax Rate (%):</strong>
          <input type="number" name="property_tax_rate" value="{{ '%.2f'|format(config.property_tax_rate * 100) }}" step="0.01" min="0" max="20"/>
        </label>
      </div>
      <div class="tax-relief">
        <label><strong>Relief (%):</strong>
          <input type="number" name="pptra_relief" value="{{ '%.0f'|format(config.pptra_relief * 100) }}" step="1" min="0" max="100"/>
        </label>
        <label><strong>Relief Cap ($):</strong>
          <input type="number" name="relief_cap" value="{{ '%.0f'|format(config.relief_cap) }}" step="100" min="0"/>
        </label>
      </div>
    </div>
    <div class="state-actions">
      <button type="submit" class="btn btn-success btn-sm">Save</button>
      <button type="button" class="btn btn-secondary btn-sm" hx-get="{{ url_for('frontend.state_tax_row', state_code=state_code) }}" hx-target="#state-{{ state_code }}" hx-swap="outerHTML">Cancel</button>
      {% if state_code not in ['VA', 'TX', 'CA'] %}
      <button type="button" class="btn btn-danger btn-sm" hx-post="{{ url_for('frontend.delete_state_tax_action', state_code=state_code) }}" hx-target="#state-{{ state_code }}" hx-swap="outerHTML" hx-confirm="Are you sure you want to delete {{ state_code }}?">Delete</button>
      {% endif %}
    </div>
  </form>
</div>
