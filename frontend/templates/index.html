{% extends "base.html" %}

{% block title %}CarKeep - Vehicle Cost Scenarios{% endblock %}

{% block content %}
<div class="fade-in">
    <div class="hero-section">
        <h1>ğŸš— Vehicle Cost Scenarios</h1>
        <p class="hero-subtitle">Compare your current car costs with potential alternatives</p>
    </div>
    
    <div class="baseline-info">
        <div class="baseline-header">
            <h2>ğŸ“Š Your Baseline: {{ baseline.vehicle.name }}</h2>
            <a href="{{ url_for('frontend.edit_baseline') }}" class="btn btn-secondary">
                âœï¸ Edit Baseline
            </a>
        </div>
        <div class="baseline-stats">
            <span class="stat-item">
                <strong>State:</strong> {{ baseline.state }}
            </span>
            <span class="stat-item">
                <strong>Current Value:</strong> ${{ "{:,.0f}".format(baseline.vehicle.current_value) }}
            </span>
            <span class="stat-item">
                <strong>Loan Balance:</strong> ${{ "{:,.0f}".format(baseline.current_loan.principal_balance) }}
            </span>
        </div>
        <p>{{ baseline.description }}</p>
    </div>
    
    <div class="scenarios-section">
        <h2>ğŸ”„ Available Scenarios</h2>
        <p class="text-muted mb-4">Click on any scenario to view detailed cost comparisons</p>
        
        {% for scenario in scenarios %}
        <div class="scenario-card">
            <div class="scenario-header">
                <h3>{{ scenario.description }}</h3>
                <div class="scenario-meta">
                    {{ scenario.financing_type|title }} â€¢ 
                    Vehicle: {{ scenario.vehicle_name }} â€¢ 
                    MSRP: ${{ "{:,.0f}".format(scenario.msrp) }} â€¢ 
                    Monthly Payment: ${{ "{:,.0f}".format(scenario.monthly_payment) }}
                </div>
            </div>
            <div class="scenario-actions">
                <a href="{{ url_for('frontend.view_scenario', scenario_name=scenario.scenario_name) }}" class="btn btn-primary">
                    ğŸ“Š View Results
                </a>
                <a href="{{ url_for('frontend.edit_scenario', scenario_name=scenario.scenario_name) }}" class="btn btn-secondary">
                    âœï¸ Edit
                </a>
                <button class="btn btn-secondary" 
                        hx-post="/api/scenarios/{{ scenario.scenario_name }}/duplicate"
                        hx-target="#scenario-counts"
                        hx-swap="outerHTML">
                    ğŸ“‹ Duplicate
                </button>
                <button class="btn btn-danger" 
                        hx-delete="/api/scenarios/{{ scenario.scenario_name }}"
                        hx-confirm="Are you sure you want to delete this scenario?"
                        hx-target="closest .scenario-card"
                        hx-swap="outerHTML swap:1s">
                    ğŸ—‘ï¸ Delete
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
    
    <div class="main-actions">
        <a href="{{ url_for('frontend.create_scenario') }}" class="btn btn-success">
            â• Create New Scenario
        </a>
        <a href="{{ url_for('frontend.comparison') }}" class="btn btn-primary">
            ğŸ“Š Compare Scenarios
        </a>
        <a href="{{ url_for('frontend.cost_analysis') }}" class="btn btn-primary">
            ğŸ’° Cost Analysis
        </a>
    </div>
    
    <div id="scenario-counts" class="scenario-summary">
        {{ scenarios|length }} Total Scenarios â€¢ 
        {{ scenarios|selectattr('financing_type', 'equalto', 'lease')|list|length }} Lease Options â€¢ 
        {{ scenarios|selectattr('financing_type', 'equalto', 'loan')|list|length }} Loan Options
    </div>
</div>
{% endblock %}
